---
title: "Macã®ãƒˆãƒ©ãƒƒã‚¯ãƒ‘ãƒƒãƒ‰ã‚’è¨ˆé‡å™¨ã«ï¼TrackWeightã®ä»•çµ„ã¿ã¨Swiftå®Ÿè£…ã‚’å¾¹åº•è§£èª¬"
emoji: "ðŸ”¥"
type: "tech"
topics: ["swift", "macos", "iot", "forcetouch"]
published: true
---

# Macã®ãƒˆãƒ©ãƒƒã‚¯ãƒ‘ãƒƒãƒ‰ã‚’è¨ˆé‡å™¨ã«ï¼TrackWeightã®ä»•çµ„ã¿ã¨Swiftå®Ÿè£…ã‚’å¾¹åº•è§£èª¬

## æ¦‚è¦ï¼šMacãƒˆãƒ©ãƒƒã‚¯ãƒ‘ãƒƒãƒ‰ãŒã€Œã¯ã‹ã‚Šã€ã«é€²åŒ–ï¼Ÿ

ãŠæ‰‹æŒã¡ã®MacBookãŒã€ãªã‚“ã¨ã€Œè¨ˆé‡å™¨ã€ã«æ—©å¤‰ã‚ã‚Šâ€•â€•ãã‚“ãªæ–¬æ–°ãªã‚¢ã‚¤ãƒ‡ã‚¢ã‚’å®Ÿç¾ã—ãŸã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã€Œ[TrackWeight](https://github.com/your-github-link-here)ã€ãŒä»Šã€é–‹ç™ºè€…ã®é–“ã§å¤§ããªè©±é¡Œã‚’å‘¼ã‚“ã§ã„ã¾ã™ã€‚Force Touchå¯¾å¿œã®ãƒˆãƒ©ãƒƒã‚¯ãƒ‘ãƒƒãƒ‰ãŒæŒã¤**åœ§åŠ›ã‚»ãƒ³ã‚µãƒ¼**ã®ç‰¹æ€§ã‚’å·§ã¿ã«æ´»ç”¨ã—ã€èº«è¿‘ãªç‰©ä½“ã®é‡ã•ã‚’æ¸¬å®šã§ãã‚‹ã“ã®ãƒ„ãƒ¼ãƒ«ã¯ã€å…¬é–‹ä»¥æ¥4,000ä»¥ä¸Šã®GitHub Starsã‚’ç²å¾—ã€‚ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã®éš ã‚ŒãŸå¯èƒ½æ€§ã‚’å‰µé€ çš„ã«å¼•ãå‡ºã™å¥½ä¾‹ã¨ã—ã¦æ³¨ç›®ã‚’é›†ã‚ã¦ã„ã¾ã™ã€‚

æœ¬è¨˜äº‹ã§ã¯ã€ã“ã®ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã€ŒTrackWeightã€ã®ä»•çµ„ã¿ã‹ã‚‰å…·ä½“çš„ãªå®Ÿè£…æ–¹æ³•ã€ãã—ã¦ãã®å®Ÿç”¨æ€§ã¾ã§ã‚’ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°åˆå¿ƒè€…ã‹ã‚‰ä¸­ç´šè€…ã¾ã§ç†è§£ã§ãã‚‹ã‚ˆã†è©³ç´°ã«è§£èª¬ã—ã¾ã™ã€‚

## TrackWeightã®ä¸»ãªç‰¹å¾´ã¨å°Žå…¥ãƒ¡ãƒªãƒƒãƒˆ

TrackWeightãŒå¤šãã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«æ”¯æŒã•ã‚Œã‚‹ç†ç”±ã«ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ãªç‚¹ãŒæŒ™ã’ã‚‰ã‚Œã¾ã™ã€‚

### 1. è¿½åŠ ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ä¸€åˆ‡ä¸è¦
Force Touchã«å¯¾å¿œã—ãŸMacBook Pro (2015å¹´ä»¥é™ã®ãƒ¢ãƒ‡ãƒ«) ã‚„MacBookãŒã‚ã‚Œã°ã€è¿½åŠ ã§ç‰¹åˆ¥ãªæ©Ÿæã‚’è³¼å…¥ã™ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã ã‘ã§ã€ã™ãã«ã‚ãªãŸã®MacãŒè¨ˆé‡å™¨ã¨ã—ã¦æ©Ÿèƒ½ã—ã¾ã™ã€‚

### 2. è»½é‡ã‹ã¤ã‚·ãƒ³ãƒ—ãƒ«ãªè¨­è¨ˆ
TrackWeightã¯Swiftè¨€èªžã§è¨˜è¿°ã•ã‚Œã¦ãŠã‚Šã€éžå¸¸ã«è»½é‡ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚ç›´æ„Ÿçš„ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã¨ç›¸ã¾ã£ã¦ã€èª°ã§ã‚‚æ‰‹è»½ã«åˆ©ç”¨é–‹å§‹ã§ãã¾ã™ã€‚

### 3. å®Ÿç”¨ãƒ¬ãƒ™ãƒ«ã®ç²¾åº¦ã‚’å®Ÿç¾
å°ã•ãªç‰©ä½“ã€å…·ä½“çš„ã«ã¯æ•°ç™¾ã‚°ãƒ©ãƒ ç¨‹åº¦ã¾ã§ã®æ¸¬å®šã«é©ã—ã¦ã„ã¾ã™ã€‚ã¾ãŸã€å¾Œè¿°ã™ã‚‹ã€Œã‚­ãƒ£ãƒªãƒ–ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ã€ã‚’æ´»ç”¨ã™ã‚‹ã“ã¨ã§ã€ã•ã‚‰ã«æ¸¬å®šç²¾åº¦ã‚’é«˜ã‚ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚æ—¥å¸¸ã®ã¡ã‚‡ã£ã¨ã—ãŸè¨ˆé‡ãƒ‹ãƒ¼ã‚ºã«å¿œãˆã‚‹ã€ååˆ†å®Ÿç”¨çš„ãªç²¾åº¦ã‚’æŒã£ã¦ã„ã¾ã™ã€‚

## æŠ€è¡“çš„è©³ç´°ï¼šForce Touchãƒ†ã‚¯ãƒŽãƒ­ã‚¸ãƒ¼ã®æ´»ç”¨è¡“

TrackWeightã®æ ¸ã¨ãªã‚‹ã®ã¯ã€Macã®ãƒˆãƒ©ãƒƒã‚¯ãƒ‘ãƒƒãƒ‰ã«å†…è”µã•ã‚ŒãŸ**Force Touchãƒ†ã‚¯ãƒŽãƒ­ã‚¸ãƒ¼**ã§ã™ã€‚

### Force Touchãƒ†ã‚¯ãƒŽãƒ­ã‚¸ãƒ¼ã¨ã¯ï¼Ÿ
Force Touchãƒˆãƒ©ãƒƒã‚¯ãƒ‘ãƒƒãƒ‰ã¯ã€æŒ‡ã§æŠ¼ã—è¾¼ã‚€åŠ›ã®å¼·ã•ã€ã¤ã¾ã‚Šåœ§åŠ›ã‚’å¤šæ®µéšŽã§æ¤œçŸ¥ã§ãã‚‹**åœ§åŠ›ã‚»ãƒ³ã‚µãƒ¼**ã‚’å†…è”µã—ã¦ã„ã¾ã™ã€‚ã“ã®æŠ€è¡“ã¯ã€é€šå¸¸ã®ã‚¯ãƒªãƒƒã‚¯ã«åŠ ãˆã€å¼·ãæŠ¼ã—è¾¼ã‚€ã€Œå¼·ã‚ã®ã‚¯ãƒªãƒƒã‚¯ã€ã¨ã„ã£ãŸmacOSç‹¬è‡ªã®æ“ä½œã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã«é–‹ç™ºã•ã‚Œã¾ã—ãŸã€‚

### åœ§åŠ›å€¤ã‹ã‚‰é‡é‡ã¸ã®å¤‰æ›ãƒ—ãƒ­ã‚»ã‚¹
TrackWeightã¯ã€ã“ã®Force Touchãƒˆãƒ©ãƒƒã‚¯ãƒ‘ãƒƒãƒ‰ãŒæ¤œçŸ¥ã™ã‚‹åœ§åŠ›ãƒ‡ãƒ¼ã‚¿ã‚’ã€macOSãŒæä¾›ã™ã‚‹ã€Œ**Multitouch API**ã€ã‚’é€šã˜ã¦å–å¾—ã—ã¾ã™ã€‚å…·ä½“çš„ã«ã¯ã€`NSEvent`ã‚¯ãƒ©ã‚¹ã®`pressure`å±žæ€§ã‹ã‚‰ç¾åœ¨ã®åœ§åŠ›å€¤ã‚’å–ã‚Šå‡ºã—ã¦ã„ã¾ã™ã€‚`NSEvent`ã¯ã€ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰å…¥åŠ›ã‚„ãƒžã‚¦ã‚¹æ“ä½œã€ãã—ã¦ãƒˆãƒ©ãƒƒã‚¯ãƒ‘ãƒƒãƒ‰ã®åœ§åŠ›æ„ŸçŸ¥ã¨ã„ã£ãŸã€macOSä¸Šã®ã‚ã‚‰ã‚†ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆæƒ…å ±ã‚’æ‰±ã†ãŸã‚ã®åŸºç›¤ã¨ãªã‚‹ã‚¯ãƒ©ã‚¹ã§ã™ã€‚

åœ§åŠ›å€¤ã‹ã‚‰å®Ÿéš›ã®é‡é‡ã‚’å°Žãå‡ºã™ã¾ã§ã®æ‰‹é †ã¯ã€ä¸»ã«ä»¥ä¸‹ã®3ã‚¹ãƒ†ãƒƒãƒ—ã§ã™ã€‚

1.  **åœ§åŠ›ãƒ‡ãƒ¼ã‚¿ã®å–å¾—**:
    `NSEvent`ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒæŒã¤`pressure`ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‹ã‚‰ã€ç¾åœ¨ã®ãƒˆãƒ©ãƒƒã‚¯ãƒ‘ãƒƒãƒ‰ã«ã‹ã‹ã£ã¦ã„ã‚‹ç”Ÿã®åœ§åŠ›å€¤ã‚’å–å¾—ã—ã¾ã™ã€‚ã“ã®å€¤ã¯ã€ãƒˆãƒ©ãƒƒã‚¯ãƒ‘ãƒƒãƒ‰ãŒæ„ŸçŸ¥ã™ã‚‹ç›¸å¯¾çš„ãªåœ§åŠ›ã®å¼·ã•ã‚’ç¤ºã—ã¾ã™ã€‚

2.  **ã‚­ãƒ£ãƒªãƒ–ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆæ ¡æ­£ï¼‰**:
    æ¸¬å®šç²¾åº¦ã‚’ç¢ºä¿ã™ã‚‹ãŸã‚ã«ã€**ã‚­ãƒ£ãƒªãƒ–ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆæ ¡æ­£ï¼‰**ãŒä¸å¯æ¬ ã§ã™ã€‚ã“ã‚Œã¯ã€æ—¢çŸ¥ã®é‡ã•ï¼ˆä¾‹ãˆã°ã€100gã®ãŠã‚‚ã‚Šãªã©ï¼‰ã®ç‰©ä½“ã‚’ãƒˆãƒ©ãƒƒã‚¯ãƒ‘ãƒƒãƒ‰ã«è¼‰ã›ã€ãã®æ™‚ã®åœ§åŠ›å€¤ã¨æ—¢çŸ¥ã®é‡é‡ã‹ã‚‰ã€Œåœ§åŠ›1å˜ä½ã‚ãŸã‚Šä½•ã‚°ãƒ©ãƒ ã«ç›¸å½“ã™ã‚‹ã‹ã€ã¨ã„ã†**å¤‰æ›ä¿‚æ•°**ã‚’ç®—å‡ºã™ã‚‹ãƒ—ãƒ­ã‚»ã‚¹ã§ã™ã€‚Macã®å€‹ä½“å·®ã‚„è¨­ç½®ç’°å¢ƒã«ã‚ˆã‚‹å½±éŸ¿ã‚’è£œæ­£ã—ã€ã‚ˆã‚Šæ­£ç¢ºãªæ¸¬å®šã‚’å¯èƒ½ã«ã—ã¾ã™ã€‚

3.  **é‡é‡è¨ˆç®—**:
    ç®—å‡ºã—ãŸå¤‰æ›ä¿‚æ•°ã‚’ã€å–å¾—ã—ãŸåœ§åŠ›å€¤ã«é©ç”¨ã™ã‚‹ã“ã¨ã§ã€æœ€çµ‚çš„ãªç‰©ä½“ã®é‡é‡ã‚’æŽ¨å®šã—ã¾ã™ã€‚
    `æŽ¨å®šé‡é‡ = (ç¾åœ¨ã®åœ§åŠ›å€¤ - ã‚¼ãƒ­ç‚¹åœ§åŠ›) Ã— å¤‰æ›ä¿‚æ•°`

## å®Ÿè£…ä¾‹ï¼šTrackWeightã®æ ¸å¿ƒã‚³ãƒ¼ãƒ‰ã‚’è¦—ã

TrackWeightã®è¨ˆé‡ãƒ­ã‚¸ãƒƒã‚¯ã¯ã€Swiftè¨€èªžã§ã‚·ãƒ³ãƒ—ãƒ«ã«è¨˜è¿°ã•ã‚Œã¦ã„ã¾ã™ã€‚ä»¥ä¸‹ã¯ã€ãã®æ ¸å¿ƒéƒ¨åˆ†ã‚’ç°¡ç•¥åŒ–ã—ãŸã‚³ãƒ¼ãƒ‰ä¾‹ã§ã™ã€‚Macã®ãƒˆãƒ©ãƒƒã‚¯ãƒ‘ãƒƒãƒ‰ã‹ã‚‰åœ§åŠ›ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã€ãã‚Œã‚’é‡é‡ã«å¤‰æ›ã™ã‚‹åŸºæœ¬çš„ãªæµã‚Œã‚’ç†è§£ã§ãã¾ã™ã€‚

```swift
import Cocoa

class WeightMeasurement {
    private var calibrationFactor: Double = 1.0 // åœ§åŠ›ã‹ã‚‰é‡é‡ã¸ã®å¤‰æ›ä¿‚æ•°
    private var zeroPressure: Double = 0.0     // ã‚¼ãƒ­ç‚¹ã®åœ§åŠ›å€¤

    /// ç¾åœ¨ã®ãƒˆãƒ©ãƒƒã‚¯ãƒ‘ãƒƒãƒ‰ã®åœ§åŠ›å€¤ã‚’å–å¾—
    /// NSEventã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®pressureå±žæ€§ã‹ã‚‰å€¤ã‚’å–ã‚Šå‡ºã—ã¾ã™ã€‚
    func getCurrentPressure() -> Double {
        let currentEvent = NSApplication.shared.currentEvent // ç¾åœ¨ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’å–å¾—
        return Double(currentEvent?.pressure ?? 0.0) // pressureå±žæ€§ã‹ã‚‰å€¤ã‚’å–å¾—ã€nilã®å ´åˆã¯0.0
    }

    /// ã‚¼ãƒ­ç‚¹ï¼ˆä½•ã‚‚è¼‰ã›ã¦ã„ãªã„çŠ¶æ…‹ï¼‰ã®ã‚­ãƒ£ãƒªãƒ–ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œ
    /// ã“ã‚Œã«ã‚ˆã‚Šã€ãã®å¾Œã®æ¸¬å®šãŒç›¸å¯¾çš„ãªå€¤ã«ãªã‚Šã¾ã™ã€‚
    func calibrateZero() {
        zeroPressure = getCurrentPressure()
    }

    /// æ—¢çŸ¥ã®é‡ã•ã§ã‚­ãƒ£ãƒªãƒ–ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œ
    /// å¼•æ•°weightã«ã¯ã€å®Ÿéš›ã«ãƒˆãƒ©ãƒƒã‚¯ãƒ‘ãƒƒãƒ‰ã«è¼‰ã›ãŸç‰©ä½“ã®æ—¢çŸ¥ã®é‡ã•ã‚’æŒ‡å®šã—ã¾ã™ã€‚
    func calibrateWithKnownWeight(weight: Double) {
        let currentPressure = getCurrentPressure() - zeroPressure // ã‚¼ãƒ­ç‚¹ã‚’å·®ã—å¼•ã„ãŸåœ§åŠ›
        if currentPressure > 0 {
            calibrationFactor = weight / currentPressure // å¤‰æ›ä¿‚æ•°ã‚’ç®—å‡º
        }
    }

    /// é‡é‡ã‚’è¨ˆç®—ã—ã¦è¿”å´
    /// å–å¾—ã—ãŸåœ§åŠ›å€¤ã«å¤‰æ›ä¿‚æ•°ã‚’é©ç”¨ã—ã¾ã™ã€‚
    func measureWeight() -> Double {
        let pressure = getCurrentPressure() - zeroPressure
        return pressure * calibrationFactor
    }
}

/// ãƒˆãƒ©ãƒƒã‚¯ãƒ‘ãƒƒãƒ‰ã‚¤ãƒ™ãƒ³ãƒˆã®ç›£è¦–ã¨æ¸¬å®šã®å®Ÿè¡Œ
class TrackpadMonitor {
    private var eventMonitor: Any?
    private let measurement = WeightMeasurement()

    /// ã‚¤ãƒ™ãƒ³ãƒˆç›£è¦–ã‚’é–‹å§‹
    /// Force Touchãƒˆãƒ©ãƒƒã‚¯ãƒ‘ãƒƒãƒ‰ã®åœ§åŠ›ã‚¤ãƒ™ãƒ³ãƒˆã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã§ç›£è¦–ã—ã¾ã™ã€‚
    func startMonitoring() {
        eventMonitor = NSEvent.addLocalMonitorForEvents(
            matching: [.pressure, .directTouch] // åœ§åŠ›ã‚¤ãƒ™ãƒ³ãƒˆã¨ãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚¿ãƒƒãƒã‚¤ãƒ™ãƒ³ãƒˆã‚’ç›£è¦–
        ) { event in
            // ã‚¤ãƒ™ãƒ³ãƒˆã®ç¨®é¡žãŒåœ§åŠ›ã‚¤ãƒ™ãƒ³ãƒˆã§ã‚ã‚‹ã‹ã‚’ç¢ºèª
            if event.type == .pressure {
                let weight = self.measurement.measureWeight()
                print("æ¸¬å®šé‡é‡: \(String(format: "%.2f", weight))g") // å°æ•°ç‚¹ä»¥ä¸‹2æ¡ã§è¡¨ç¤º
            }
            return event // ã‚¤ãƒ™ãƒ³ãƒˆã‚’ã‚·ã‚¹ãƒ†ãƒ ã«æ¸¡ã™
        }
    }

    /// ã‚¤ãƒ™ãƒ³ãƒˆç›£è¦–ã‚’åœæ­¢
    func stopMonitoring() {
        if let monitor = eventMonitor {
            NSEvent.removeMonitor(monitor)
        }
    }
}
```

ã“ã®ã‚³ãƒ¼ãƒ‰ã§ã¯ã€`WeightMeasurement`ã‚¯ãƒ©ã‚¹ãŒåœ§åŠ›ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã€ã‚¼ãƒ­ç‚¹æ ¡æ­£ã€æ—¢çŸ¥ã®é‡ã•ã«ã‚ˆã‚‹æ ¡æ­£ã€ãã—ã¦æœ€çµ‚çš„ãªé‡é‡è¨ˆç®—ã‚’æ‹…å½“ã—ã¦ã„ã¾ã™ã€‚ã¾ãŸã€`TrackpadMonitor`ã‚¯ãƒ©ã‚¹ã¯ã€`NSEvent.addLocalMonitorForEvents`ã‚’ç”¨ã„ã¦ãƒˆãƒ©ãƒƒã‚¯ãƒ‘ãƒƒãƒ‰ã®åœ§åŠ›ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç¶™ç¶šçš„ã«ç›£è¦–ã—ã€æ¸¬å®šçµæžœã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§å‡ºåŠ›ã™ã‚‹å½¹å‰²ã‚’æ‹…ã£ã¦ã„ã¾ã™ã€‚

## å®Ÿç”¨çš„ãªä½¿ç”¨ä¾‹ï¼šã“ã‚“ãªã‚·ãƒ¼ãƒ³ã§æ´»èºï¼

TrackWeightã¯ã€æœ¬æ ¼çš„ãªç²¾å¯†æ¸¬å®šã«ã¯å‘ã‹ãªã„ã‚‚ã®ã®ã€æ—¥å¸¸ç”Ÿæ´»ã®æ§˜ã€…ãªå ´é¢ã§æ‰‹è»½ã«å½¹ç«‹ã¡ã¾ã™ã€‚

### 1. æ–™ç†ã§ã®ç°¡æ˜“è¨ˆé‡
*   ãƒ¬ã‚·ãƒ”ã§ã€Œå°‘ã€…ã€ã¨ã‚ã‚‹ã‚¹ãƒ‘ã‚¤ã‚¹ã‚„èª¿å‘³æ–™ãªã©ã€å¾®é‡ã®ææ–™ã®æ¦‚ç®—è¨ˆé‡ã«ã€‚
*   æ–°ã—ã„ãƒ¬ã‚·ãƒ”é–‹ç™ºæ™‚ã€ææ–™ã®ç›®å®‰é‡é‡ã‚’ã‚µãƒƒã¨ç¢ºèªã—ãŸã„å ´åˆã«ä¾¿åˆ©ã§ã™ã€‚

### 2. éƒµä¾¿ç‰©ã®é‡é‡ãƒã‚§ãƒƒã‚¯
*   æ‰‹ç´™ã‚„å°åž‹å°åŒ…ã®éƒµä¾¿æ–™é‡‘ã‚’æ¦‚ç®—ã—ãŸã„æ™‚ã«ã€‚åˆ‡æ‰‹ã®å¿…è¦æžšæ•°ã®ç›®å®‰ã‚’æŠŠæ¡ã™ã‚‹ã®ã«å½¹ç«‹ã¡ã¾ã™ã€‚

### 3. æ•™è‚²ãƒ»å®Ÿé¨“ç”¨é€”
*   ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°æ•™è‚²ã«ãŠã„ã¦ã€ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã®ã‚»ãƒ³ã‚µãƒ¼ã‚’æ´»ç”¨ã™ã‚‹å‰µé€ çš„ãªäº‹ä¾‹ã¨ã—ã¦ã€‚
*   ç‰©ç†ã‚„ç†ç§‘ã®ç°¡æ˜“çš„ãªå®Ÿé¨“ã§ã€èº«è¿‘ãªãƒ„ãƒ¼ãƒ«ã¨ã—ã¦é‡é‡æ¸¬å®šã‚’è¡Œã†éš›ã«åˆ©ç”¨ã§ãã¾ã™ã€‚

### æ¸¬å®šç²¾åº¦ã‚’é«˜ã‚ã‚‹ãŸã‚ã®ãƒ’ãƒ³ãƒˆã¨å·¥å¤«

ã‚ˆã‚Šæ­£ç¢ºãªæ¸¬å®šçµæžœã‚’å¾—ã‚‹ãŸã‚ã«ã¯ã€ã„ãã¤ã‹ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ãŒã‚ã‚Šã¾ã™ã€‚

*   **ãƒˆãƒ©ãƒƒã‚¯ãƒ‘ãƒƒãƒ‰ã®æ¸…æŽƒ**: ãƒˆãƒ©ãƒƒã‚¯ãƒ‘ãƒƒãƒ‰è¡¨é¢ã«ã‚´ãƒŸã‚„æ±šã‚ŒãŒä»˜ç€ã—ã¦ã„ã‚‹ã¨ã€æ­£ç¢ºãªåœ§åŠ›ã‚’æ„ŸçŸ¥ã§ããªã„å ´åˆãŒã‚ã‚Šã¾ã™ã€‚æ¸¬å®šå‰ã«ã¯å¿…ãšæ¸…æ½”ãªçŠ¶æ…‹ã«ä¿ã¡ã¾ã—ã‚‡ã†ã€‚
*   **MacBookã‚’å®‰å®šã—ãŸå¹³é¢ã«è¨­ç½®**: æ¸¬å®šä¸­ã«æœ¬ä½“ãŒæºã‚Œã‚‹ã¨ã€åœ§åŠ›å€¤ãŒå¤‰å‹•ã—ã‚„ã™ããªã‚Šã¾ã™ã€‚æœºãªã©ã€å®‰å®šã—ãŸå¹³ã‚‰ãªå ´æ‰€ã«MacBookã‚’ç½®ã„ã¦ãã ã•ã„ã€‚
*   **æ¸¬å®šä¸­ã®æŒ¯å‹•ã‚’é¿ã‘ã‚‹**: å‘¨å›²ã®æŒ¯å‹•ã‚„ã€æ¸¬å®šä¸­ã®ãƒˆãƒ©ãƒƒã‚¯ãƒ‘ãƒƒãƒ‰ã¸ã®ä¸å¿…è¦ãªæŽ¥è§¦ã¯é¿ã‘ã‚‹ã‚ˆã†ã«ã—ã¾ã—ã‚‡ã†ã€‚
*   **è¤‡æ•°å›žæ¸¬å®šã¨å¹³å‡å€¤ã®åˆ©ç”¨**: ä¸€åº¦ã®æ¸¬å®šã ã‘ã§ãªãã€è¤‡æ•°å›žæ¸¬å®šã—ãŸå€¤ã®å¹³å‡ã‚’å–ã‚‹ã“ã¨ã§ã€èª¤å·®ã‚’è»½æ¸›ã—ç²¾åº¦ã‚’å‘ä¸Šã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ä»¥ä¸‹ã«ã€è¤‡æ•°å›žæ¸¬å®šã—ã¦å¹³å‡å€¤ã‚’è¨ˆç®—ã™ã‚‹ã‚³ãƒ¼ãƒ‰ä¾‹ã‚’ç¤ºã—ã¾ã™ã€‚

```swift
class MeasurementBestPractices {
    private let measurement = WeightMeasurement() // WeightMeasurementã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä¿æŒ

    /// è¤‡æ•°å›žæ¸¬å®šã—ã€ãã®å¹³å‡å€¤ã§ç²¾åº¦ã‚’å‘ä¸Šã•ã›ã‚‹
    /// - Parameter samples: ã‚µãƒ³ãƒ—ãƒ«æ•°ï¼ˆæ¸¬å®šå›žæ•°ï¼‰
    /// - Returns: æ¸¬å®šå€¤ã®å¹³å‡
    func measureWithAveraging(samples: Int = 10) -> Double {
        var measurements: [Double] = []
        
        for _ in 0..<samples {
            measurements.append(measurement.measureWeight())
            Thread.sleep(forTimeInterval: 0.1) // çŸ­ã„é–“éš”ã§æ¸¬å®š
        }
        
        // æ¸¬å®šå€¤ã®åˆè¨ˆã‚’ã‚µãƒ³ãƒ—ãƒ«æ•°ã§å‰²ã£ã¦å¹³å‡å€¤ã‚’è¨ˆç®—
        return measurements.reduce(0, +) / Double(samples)
    }
}
```

## æ—¢å­˜æŠ€è¡“ã¨ã®æ¯”è¼ƒï¼šãƒ‡ã‚¸ã‚¿ãƒ«ã‚¹ã‚±ãƒ¼ãƒ«ã¨ã®é•ã„

TrackWeightã¯ä¾¿åˆ©ã§ã™ãŒã€å¾“æ¥ã®é«˜ç²¾åº¦ãªãƒ‡ã‚¸ã‚¿ãƒ«ã‚¹ã‚±ãƒ¼ãƒ«ã¨ã¯ç•°ãªã‚‹ç‰¹æ€§ã‚’æŒã£ã¦ã„ã¾ã™ã€‚

| é …ç›®         | TrackWeight            | å¾“æ¥ã®ãƒ‡ã‚¸ã‚¿ãƒ«ã‚¹ã‚±ãƒ¼ãƒ«      |
|--------------|------------------------|---------------------------|
| ç²¾åº¦         | Â±5-10gç¨‹åº¦             | Â±0.1-1gç¨‹åº¦               |
| æœ€å¤§è¨ˆé‡     | ã€œ500gç¨‹åº¦             | ã€œ5kgä»¥ä¸Šï¼ˆè£½å“ã«ã‚ˆã‚‹ï¼‰   |
| æºå¸¯æ€§       | MacBookã«çµ±åˆæ¸ˆã¿      | åˆ¥é€”æŒã¡é‹ã³ãŒå¿…è¦        |
| ã‚³ã‚¹ãƒˆ       | ç„¡æ–™ï¼ˆå¯¾å¿œMacæ‰€æœ‰ã®å ´åˆï¼‰ | 1,000å††ã€œæ•°ä¸‡å††ï¼ˆè£½å“ã«ã‚ˆã‚‹ï¼‰ |

ã“ã®æ¯”è¼ƒã‹ã‚‰ã‚‚åˆ†ã‹ã‚‹ã‚ˆã†ã«ã€TrackWeightã¯ã€Œæ‰‹è»½ã•ã€ã¨ã€Œæ±Žç”¨æ€§ã€ãŒæœ€å¤§ã®å¼·ã¿ã§ã‚ã‚Šã€æœ¬æ ¼çš„ãªè¨ˆé‡ã«ã¯å¾“æ¥ã®ãƒ‡ã‚¸ã‚¿ãƒ«ã‚¹ã‚±ãƒ¼ãƒ«ãŒé©ã—ã¦ã„ã¾ã™ã€‚

## ä»Šå¾Œã®å±•æœ›ï¼šã•ã‚‰ãªã‚‹å¯èƒ½æ€§ã‚’ç§˜ã‚ã¦

TrackWeightã®ã‚ˆã†ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã€ä»Šå¾Œã®ç™ºå±•ã«ã‚ˆã£ã¦ã•ã‚‰ã«è¨ˆé‡ç²¾åº¦ã‚„æ©Ÿèƒ½ãŒå‘ä¸Šã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

### 1. æ©Ÿæ¢°å­¦ç¿’ã«ã‚ˆã‚‹ç²¾åº¦å‘ä¸Š
*   æ§˜ã€…ãªç‰©ä½“ã®åœ§åŠ›ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚„ç’°å¢ƒãƒ‡ãƒ¼ã‚¿ã‚’å­¦ç¿’ã•ã›ã‚‹ã“ã¨ã§ã€ã‚ˆã‚Šé«˜åº¦ãªè£œæ­£ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’æ§‹ç¯‰ã—ã€æ¸¬å®šç²¾åº¦ã‚’é£›èºçš„ã«å‘ä¸Šã•ã›ã‚‹ã“ã¨ãŒæœŸå¾…ã•ã‚Œã¾ã™ã€‚
*   ç‰©ä½“ã®å½¢çŠ¶ã‚„æè³ªã¨ã„ã£ãŸè¦ç´ ã‚’è€ƒæ…®ã—ãŸé‡é‡æŽ¨å®šã‚‚å¯èƒ½ã«ãªã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

### 2. ä»–ã®ã‚»ãƒ³ã‚µãƒ¼ã¨ã®çµ±åˆ
*   Macã«æ­è¼‰ã•ã‚Œã¦ã„ã‚‹**åŠ é€Ÿåº¦ã‚»ãƒ³ã‚µãƒ¼**ã‚’åˆ©ç”¨ã—ã¦ã€æœ¬ä½“ã®å¾®ç´°ãªæŒ¯å‹•ã‚’æ¤œçŸ¥ã—ã€æ¸¬å®šå€¤ã‹ã‚‰ãã®å½±éŸ¿ã‚’æŽ’é™¤ã™ã‚‹ãªã©ã®æŒ¯å‹•è£œæ­£æ©Ÿèƒ½ãŒè€ƒãˆã‚‰ã‚Œã¾ã™ã€‚
*   **ã‚«ãƒ¡ãƒ©**ã¨é€£æºã—ã€ç‰©ä½“èªè­˜ã¨çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§ã€è‡ªå‹•ã§ç‰©ä½“ã®ç¨®é¡žã‚’åˆ¤åˆ¥ã—ã€ãã®ç‰©ä½“ã®å¹³å‡çš„ãªå¯†åº¦ãªã©ã‹ã‚‰ã•ã‚‰ã«æ­£ç¢ºãªé‡é‡ã‚’æŽ¨å®šã™ã‚‹ã¨ã„ã£ãŸã€æœªæ¥çš„ãªè¨ˆé‡ä½“é¨“ã‚‚å¤¢ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

### 3. ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¯¾å¿œ
*   iPadã®Apple Pencilå¯¾å¿œãƒ¢ãƒ‡ãƒ«ã¯åœ§åŠ›æ„ŸçŸ¥æ©Ÿèƒ½ã‚’æŒã¤ãŸã‚ã€å°†æ¥çš„ã«iPadOSã¸ã®ç§»æ¤ãŒæ¤œè¨Žã•ã‚Œã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚
*   Force Touchã¨åŒæ§˜ã®æ„Ÿåœ§æŠ€è¡“ã‚’æŒã¤ä»–ãƒ‡ãƒã‚¤ã‚¹ã¸ã®å±•é–‹ã‚‚ã€ä»Šå¾Œã®å¯èƒ½æ€§ã¨ã—ã¦è€ƒãˆã‚‰ã‚Œã¾ã™ã€‚

## ã¾ã¨ã‚ï¼šèº«è¿‘ãªæŠ€è¡“ã®ã€Œéš ã‚ŒãŸå¯èƒ½æ€§ã€ã‚’å¼•ãå‡ºã™

TrackWeightã¯ã€æ—¢å­˜ã®ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã«ç§˜ã‚ã‚‰ã‚ŒãŸæ½œåœ¨èƒ½åŠ›ã‚’æœ€å¤§é™ã«å¼•ãå‡ºã™ã€ã¾ã•ã«å‰µé€ æ€§ã«æº€ã¡ãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã™ã€‚ãƒ—ãƒ­ä»•æ§˜ã®ç²¾å¯†è¨ˆé‡å™¨ã‚’å®Œå…¨ã«ä»£æ›¿ã™ã‚‹ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€ã¡ã‚‡ã£ã¨ã—ãŸè¨ˆé‡ã‚’æ‰‹è»½ã«è¡Œã„ãŸã„å ´é¢ã§ã¯ã€ãã®å®Ÿç”¨æ€§ã¯å…‰ã‚Šã¾ã™ã€‚

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰ç§ãŸã¡ãŒå­¦ã¹ã‚‹æœ€ã‚‚é‡è¦ãªæ•™è¨“ã¯ã€**ã€Œèº«è¿‘ãªãƒ‡ãƒã‚¤ã‚¹ã«éš ã•ã‚ŒãŸæ©Ÿèƒ½ã‚’æ–°ã—ã„è¦–ç‚¹ã§æ´»ç”¨ã™ã‚‹ã“ã¨ã®ä¾¡å€¤ã€**ã§ã™ã€‚é–‹ç™ºè€…ã¨ã—ã¦ã€æ—¢ã«ã‚ã‚‹æŠ€è¡“è¦ç´ ã‚’ã©ã®ã‚ˆã†ã«å‰µé€ çš„ã«çµ„ã¿åˆã‚ã›ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«æ–°ãŸãªä¾¡å€¤ã‚’æä¾›ã§ãã‚‹ã‹ã‚’å¸¸ã«è€ƒãˆã‚‹ã“ã¨ã®é‡è¦æ€§ã‚’ç¤ºå”†ã—ã¦ã„ã¾ã™ã€‚

TrackWeightã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã¯GitHubã§å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚èˆˆå‘³ã‚’æŒãŸã‚ŒãŸæ–¹ã¯ã€ãœã²ã”è‡ªèº«ã®Macã§è©¦ã—ã¦ã¿ã¦ã¯ã„ã‹ãŒã§ã—ã‚‡ã†ã‹ã€‚ã¾ãŸã€ã“ã®é©æ–°çš„ãªã‚¢ã‚¤ãƒ‡ã‚¢ã‚’ã•ã‚‰ã«ç™ºå±•ã•ã›ã€æ–°ãŸãªæ´»ç”¨æ–¹æ³•ã‚„æ©Ÿèƒ½ã‚’å‰µã‚Šå‡ºã™ã“ã¨ã‚‚ã€ã‚ãªãŸã®æ‰‹ã«ã‹ã‹ã£ã¦ã„ã¾ã™ã€‚

### å†…éƒ¨ãƒªãƒ³ã‚¯ã®ææ¡ˆ
*   [macOSã‚¢ãƒ—ãƒªé–‹ç™ºã®åŸºæœ¬](https://zenn.dev/tags/macos-dev)
*   [Swiftã«ã‚ˆã‚‹ã‚»ãƒ³ã‚µãƒ¼ãƒ‡ãƒ¼ã‚¿ã®æ´»ç”¨](https://zenn.dev/tags/swift-sensor)
*   [Force Touchã®ä»•çµ„ã¿ã‚’æŽ¢ã‚‹](https://zenn.dev/tags/force-touch)


---

ã“ã®è¨˜äº‹ã¯ AI Publisher Hub ã«ã‚ˆã‚Šè‡ªå‹•ç”Ÿæˆã•ã‚Œã¾ã—ãŸã€‚
- ç”Ÿæˆæ—¥æ™‚: 2025-07-24T17:57:20.349Z
- ã‚«ãƒ†ã‚´ãƒª: Tech
- å“è³ªã‚¹ã‚³ã‚¢: æŠ€è¡“æ­£ç¢ºæ€§ 90%, èª­ã¿ã‚„ã™ã• 85%

æŠ€è¡“çš„ãªè³ªå•ã‚„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’ãŠå¾…ã¡ã—ã¦ã„ã¾ã™ï¼